@page "/admin/cms"
@using BlazorApp.Auth
@inject NavigationManager NavManager
@using Newtonsoft.Json;

<div class="sidebar">
    <SideNavMenu />
</div>
<div class="admin container">
    <div class="row justify-content-center" style="margin-top: 20px;">
        <div class="col-md-6">
            @if (!string.IsNullOrEmpty(BlitzWareAuthService.AuthService.userData.Token) &&
                  BlitzWareAuthService.AuthService.appData.AdminRoleLevel
                  ==
                  BlitzWareAuthService.AuthService.userData.UserSubLevel)
            {
                <h3>Welcome @BlitzWareAuthService.AuthService.userData.Username</h3>
                <p>CMS main</p>
            }
            else
            {
                <p>You are not allowed to access this page!</p>
            }
        </div>
    </div>
</div>

@code {
    [Inject]
    private BlitzWareAuthService BlitzWareAuthService { get; set; }

    protected override async Task OnInitializedAsync()
    {
        if (string.IsNullOrEmpty(BlitzWareAuthService.AuthService.userData.Token))
            NavManager.NavigateTo("/login");
    }
}
