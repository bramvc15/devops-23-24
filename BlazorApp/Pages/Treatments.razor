@page "/behandelingen"
@using Shared.DTO.CMS;
@using Services.CMS;
@inject TreatmentService treatmentService

<PageTitle>Behandelingen</PageTitle>

<div class="background-div">
    <div class="overlay">
        <h1>Behandelingen</h1>
        <span class="breadcrumbs" data-test-id="behandelingen-home-breadcrumb">
            <BindToLocation />
        </span>

        <div class="container mt-40">
            <div class="row ">
                @if (treatments != null)
                {
                    foreach (var treatment in treatments)
                    {
                        <div class="col-md-4 d-flex flex-fill">
                            <TreatmentCard ImageSrc=@treatment.ImageLink Title=@treatment.Name
                                OnCardClick="@( () => NavigateDetailTreatment(treatment.Name) )" />
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</div>

@code {
    [Inject] NavigationManager NavigationManager { get; set; }
    private string currentPage = "/behandelingen";
    private void NavigateDetailTreatment(string page)
    {
        NavigationManager.NavigateTo(@currentPage + $"/{page}");
    }

    private IEnumerable<TreatmentDTO> treatments;

    protected override async Task OnInitializedAsync()
    {
        treatments = await treatmentService.GetTreatments();
    }
}