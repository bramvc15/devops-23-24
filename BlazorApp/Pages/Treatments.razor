@page "/behandelingen"
@using Shared
@using BlazorApp.Services.CMS
@inject CMSTreatmentService TreatmentService

<PageTitle>Behandelingen</PageTitle>

<div class="background-div">
    <div class="overlay">
        <h1>Behandelingen</h1>
        <span class="breadcrumbs" data-test-id="behandelingen-home-breadcrumb">
            <a href="/"><u>Home</u></a> > Behandelingen
        </span>

        <div class="container mt-40">
            <div class="row ">
                @if (TreatmentObj != null)
                {
                    foreach (var treatment in TreatmentObj)
                    {
                        <div class="col-md-4 d-flex flex-fill">
                            <TreatmentCard ImageSrc=@treatment.ImageLink Title=@treatment.Name
                                OnCardClick="@( () => NavigateDetailTreatment(treatment.Name.ToLower()) )" />
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</div>

@code {
    [Inject] NavigationManager NavigationManager { get; set; }
    private string currentPage = "/behandelingen";
    private void NavigateDetailTreatment(string page)
    {
        NavigationManager.NavigateTo(@currentPage + $"/{page}");
    }

    IEnumerable<CMSTreatment> TreatmentObj;

    protected override async Task OnInitializedAsync()
    {
        TreatmentObj = await TreatmentService.GetTreatments();
    }
}